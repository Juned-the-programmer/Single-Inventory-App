{% extends 'pages/base.html' %}
{% load static %}
{% load user_auth %}
{% block title %}
View Customer
{% endblock title %}

{% block content %}
<link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
<link href="{% static 'vendor/fonts/circular-std/style.css' %}" rel="stylesheet">
<link rel="stylesheet" href="{% static 'libs/css/style.css' %}">
<link rel="stylesheet" href="{% static 'vendor/fonts/fontawesome/css/fontawesome-all.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'vendor/datatables/css/dataTables.bootstrap4.css' %}">

{% if request.user|has_group:"Estimate" %}
<div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <div class="card">
            <h5 class="card-header">Customer List</h5>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered first" id="example">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Contact No</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Landmark</th>
                                <th>Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for i in customer_data %}
                            <tr>
                                <td>{{i.customerid}}</td>
                                <td>{{i.fullname}}</td>
                                <td>{{i.contactno}}</td>
                                <td>{{i.city}}</td>
                                <td>{{i.state}}</td>
                                <td>{{i.landmark}}</td>
                                <td>
                                    <a href="/dashboard/updatecustomer/{{i.id}}">Update</a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <div class="card">
            <h5 class="card-header">Customer List</h5>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered first" id="example">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>E-Mail</th>
                                <th>Contact No</th>
                                <th>GST No</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Landmark</th>
                                <th>Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for i in customer_data %}
                            <tr>
                                <td>{{i.customerid}}</td>
                                <td>{{i.fullname}}</td>
                                <td>{{i.email}}</td>
                                <td>{{i.contactno}}</td>
                                <td>{{i.gst}}</td>
                                <td>{{i.city}}</td>
                                <td>{{i.state}}</td>
                                <td>{{i.landmark}}</td>
                                <td>
                                    <a href="/dashboard/updatecustomer/{{i.id}}">Update</a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>   
{% endif %}

<script src="{% static 'vendor/jquery/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/data-table.js' %}"></script>
<script src="{% static 'vendor/datatables/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/buttons.bootstrap4.min.js' %}"></script>

<script>

$(document).ready(function() {
$('#example').DataTable();
} );

</script>

{% endblock content %}