{% extends 'pages/base.html' %}
{% load static %}
{% load user_auth %}
{% block title %}
From to Where 
{% endblock title %}

{% block content %}

{% comment %} <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'vendor/datatables/css/dataTables.bootstrap4.css' %}">
<link href="{% static 'vendor/fonts/circular-std/style.css' %}" rel="stylesheet">
<link rel="stylesheet" href="{% static 'libs/css/style.css' %}">
<link rel="stylesheet" href="{% static 'vendor/fonts/fontawesome/css/fontawesome-all.css' %}"> {% endcomment %}


{% if request.user|has_group:"Estimate" %}
<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
    <div class="card">
        <h5 class="card-header">From To Where Customer Sale Records</h5>
        <div class="card-body">
            <form method="POST">
            {% csrf_token %}
                <div class="form-row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-2">
                        <label for="validationCustom05">From</label>
                        <input type="date" class="form-control" id="validationCustom05" name="fromdate" placeholder="Date">
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-2">
                        <label for="validationCustom05">To</label>
                        <input type="date" class="form-control" id="validationCustom05" name="todate" placeholder="Date">
                    </div>
                </div>
                <div class="form-row">
                    <p class="text-right pl-2 pt-3">
                    <input type="submit" class="btn btn-space btn-success rounded" name="Estimate" value="Submit">
                    <a href="{% url 'dashboard' %}" class="btn btn-space btn-danger rounded">Cancel</a>
                    </p>
                </div> 
            </form>

            <div class="form-row">
                <p class="text-right pl-2 pt-3">
                    <button type="submit" id="btn" class="btn btn-space btn-success rounded" onclick="printDiv('invoice_estimate')">
                    Print
                    </button>
                </p>
            </div>

            <div style="display:flex; flex-direction: row;" id="invoice_estimate">
                <table cellspacing="0" border="0" class="table table-striped table-bordered">
                    <thead class="text-center">
                        <tr>
                            <td colspan="3" height="26" align="center" valign="bottom" class="text-dark">Debit/Jama</td>
                            <td colspan="3" height="26" align="center" valiagn="bottom" class="text-dark">Credit/udhar</td>
                        </tr>
                        <tr>
                            <td height="26" width=10% align="left" valiagn="middle" class="text-dark">Date</td>
                            <td height="26" align="middle" valiagn="middle" class="text-dark">Particular</td>
                            <td height="26" width=10% align="left" valiagn="bottom" class="text-dark">Amount RS.</td>
                            <td height="26" width=10% align="left" valiagn="middle" class="text-dark">Date</td>
                            <td height="26" align="middle" valiagn="middle" class="text-dark">Particular</td>
                            <td height="26" width=10% align="left" valiagn="bottom" class="text-dark">Amount RS.</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                            <td height="20" align="left" valiagn="bottom">03-12-16</td>
                        </tr>
                    </tbody>
                </table>       
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
    <div class="card">
        <h5 class="card-header">From To Where Sale Records</h5>
        <div class="card-body">
            <form method="POST">
            {% csrf_token %}
                <div class="form-row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-2">
                        <label for="validationCustom05">From</label>
                        <input type="date" class="form-control" id="validationCustom05" name="fromdate" placeholder="Date">
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mb-2">
                        <label for="validationCustom05">To</label>
                        <input type="date" class="form-control" id="validationCustom05" name="todate" placeholder="Date">
                    </div>
                </div>
                <div class="form-row">
                    <p class="text-right pl-2 pt-3">
                    <input type="submit" class="btn btn-space btn-success rounded" name="GST" value="Submit">
                    <a href="{% url 'dashboard' %}" class="btn btn-space btn-danger rounded">Cancel</a>
                    </p>
                </div> 
            </form>

            <div class="table-responsive mt-5">
                <table class="table table-striped table-bordered first" id="example">
                    <thead>
                        <tr>
                            <th>Bill No</th>
                            <th>Customer Name</th>
                            <th>Total Amount</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in sale_data %}
                        <tr>
                            <td>{{i.Bill_no}}</td>
                            <td>{{i.customer}}</td>
                            <td>{{i.Total_amount}}</td>
                            <td>{{i.date}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% comment %} <script src="{% static 'libs/js/jquery-3.5.1.js' %}"></script>
<script src="{% static 'vendor/jquery/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/data-table.js' %}"></script>
<script src="{% static 'vendor/datatables/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'vendor/datatables/js/buttons.bootstrap4.min.js' %}"></script>  {% endcomment %}

<script>
    $(document).ready(function(){
        $('.suppliername').on("change",function(){
            var id=$(this).val();
            // alert(id)
            $.ajax({
                url: "{% url 'getsupplier' %}",
                data : { 'sid' : id },
                success : function(data){
                   $('.card .pending-amount').val(data)
                }
            });
        });
    });

    function printDiv(divName){
        var printContents = document.getElementById(divName).innerHTML;
        var originalContents = document.body.innerHTML;

        document.body.innerHTML = printContents;

        window.print();

        document.body.innerHTML = originalContents;

    }
</script>

{% endblock content %}